id: 'CommentSubscribe'
key: 'comment-subscribe'
name: 'Comment Subscribe'
description: "Allows viewers to subscribe to recieve emails every time a comment is posted for a given entry."
version: 1.3.1
schema_version: 2
author_name : "Robert Synnott, Byrne Reese"

object_types:
  commentsubscriptions: 'CommentSubscribe::CommentSubscriptions'

callbacks:
  MT::Comment::post_save: $CommentSubscribe::CommentSubscribe::Plugin::process_new_comment

upgrade_functions:
  add_uniqkey:
    version_limit: 2
    priority: 1
    updater:
      type: commentsubscriptions
      label: Populating unique keys...
      code: >
          sub {
               use String::Random qw( random_string );
               $_[0]->uniqkey( random_string('000000000000',[ 'A'..'Z', 'a'..'z' ]) );
          }

applications:
  comments:
    methods:
      unsub: $CommentSubscribe::CommentSubscribe::Plugin::unsub
